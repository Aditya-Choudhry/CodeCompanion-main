{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { EmployeeModalComponent } from '../employee-modal/employee-modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/employee.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction EmployeeListComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"div\", 26)(2, \"span\", 27);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction EmployeeListComponent_div_23_tr_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\")(15, \"div\", 33)(16, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function EmployeeListComponent_div_23_tr_19_Template_button_click_16_listener() {\n      const employee_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.viewEmployee(employee_r2));\n    });\n    i0.ɵɵelement(17, \"i\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function EmployeeListComponent_div_23_tr_19_Template_button_click_18_listener() {\n      const employee_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.editEmployee(employee_r2));\n    });\n    i0.ɵɵelement(19, \"i\", 37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function EmployeeListComponent_div_23_tr_19_Template_button_click_20_listener() {\n      const employee_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.deleteEmployee(employee_r2));\n    });\n    i0.ɵɵelement(21, \"i\", 39);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const employee_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(employee_r2.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(employee_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(employee_r2.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(employee_r2.position);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(11, 6, employee_r2.salary));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(employee_r2.department.name);\n  }\n}\nfunction EmployeeListComponent_div_23_tr_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 40);\n    i0.ɵɵtext(2, \" No employees found \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction EmployeeListComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"table\", 29)(2, \"thead\", 30)(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Employee ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Position\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Salary\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Department\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(18, \"tbody\");\n    i0.ɵɵtemplate(19, EmployeeListComponent_div_23_tr_19_Template, 22, 8, \"tr\", 31)(20, EmployeeListComponent_div_23_tr_20_Template, 3, 0, \"tr\", 32);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(19);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.filteredEmployees)(\"ngForTrackBy\", ctx_r2.trackByEmployeeId);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.filteredEmployees.length === 0);\n  }\n}\nfunction EmployeeListComponent_app_employee_modal_54_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-employee-modal\", 41);\n    i0.ɵɵlistener(\"close\", function EmployeeListComponent_app_employee_modal_54_Template_app_employee_modal_close_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeModal());\n    })(\"employeeSaved\", function EmployeeListComponent_app_employee_modal_54_Template_app_employee_modal_employeeSaved_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onEmployeeSaved());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"employee\", ctx_r2.selectedEmployee)(\"departments\", ctx_r2.departments)(\"isEditMode\", ctx_r2.isEditMode);\n  }\n}\nexport let EmployeeListComponent = /*#__PURE__*/(() => {\n  class EmployeeListComponent {\n    constructor(employeeService) {\n      this.employeeService = employeeService;\n      this.employees = [];\n      this.departments = [];\n      this.filteredEmployees = [];\n      this.searchDepartmentId = '';\n      this.selectedEmployee = null;\n      this.isLoading = false;\n      this.showEmployeeModal = false;\n      this.isEditMode = false;\n    }\n    ngOnInit() {\n      this.loadEmployees();\n      this.loadDepartments();\n    }\n    loadEmployees() {\n      this.isLoading = true;\n      this.employeeService.getAllEmployees().subscribe({\n        next: employees => {\n          this.employees = employees;\n          this.filteredEmployees = employees;\n          this.isLoading = false;\n        },\n        error: error => {\n          console.error('Error loading employees:', error);\n          this.isLoading = false;\n        }\n      });\n    }\n    loadDepartments() {\n      this.employeeService.getAllDepartments().subscribe({\n        next: departments => {\n          this.departments = departments;\n        },\n        error: error => {\n          console.error('Error loading departments:', error);\n        }\n      });\n    }\n    searchByDepartment() {\n      if (!this.searchDepartmentId.trim()) {\n        this.filteredEmployees = this.employees;\n        return;\n      }\n      this.isLoading = true;\n      this.employeeService.getEmployeesByDepartment(this.searchDepartmentId).subscribe({\n        next: employees => {\n          this.filteredEmployees = employees;\n          this.isLoading = false;\n        },\n        error: error => {\n          console.error('Error searching employees:', error);\n          this.filteredEmployees = [];\n          this.isLoading = false;\n        }\n      });\n    }\n    showAllEmployees() {\n      this.searchDepartmentId = '';\n      this.filteredEmployees = this.employees;\n    }\n    viewEmployee(employee) {\n      this.selectedEmployee = employee;\n      this.showEmployeeModal = true;\n      this.isEditMode = false;\n    }\n    editEmployee(employee) {\n      this.selectedEmployee = employee;\n      this.showEmployeeModal = true;\n      this.isEditMode = true;\n    }\n    deleteEmployee(employee) {\n      if (confirm(`Are you sure you want to delete ${employee.name}?`)) {\n        this.employeeService.deleteEmployee(employee.id).subscribe({\n          next: () => {\n            this.loadEmployees();\n            alert('Employee deleted successfully!');\n          },\n          error: error => {\n            console.error('Error deleting employee:', error);\n            alert('Error deleting employee!');\n          }\n        });\n      }\n    }\n    addNewEmployee() {\n      this.selectedEmployee = null;\n      this.showEmployeeModal = true;\n      this.isEditMode = false;\n    }\n    closeModal() {\n      this.showEmployeeModal = false;\n      this.selectedEmployee = null;\n    }\n    onEmployeeSaved() {\n      this.closeModal();\n      this.loadEmployees();\n    }\n    generateReport() {\n      this.employeeService.generateReport().subscribe({\n        next: blob => {\n          const url = window.URL.createObjectURL(blob);\n          const link = document.createElement('a');\n          link.href = url;\n          link.download = 'employees-report.pdf';\n          link.click();\n          window.URL.revokeObjectURL(url);\n        },\n        error: error => {\n          console.error('Error generating report:', error);\n          alert('Error generating report!');\n        }\n      });\n    }\n    getDepartmentName(departmentId) {\n      const dept = this.departments.find(d => d.id === departmentId);\n      return dept ? dept.name : 'Unknown';\n    }\n    trackByEmployeeId(index, employee) {\n      return employee.id;\n    }\n    getAverageSalary() {\n      if (this.filteredEmployees.length === 0) return 0;\n      const total = this.filteredEmployees.reduce((sum, emp) => sum + emp.salary, 0);\n      return total / this.filteredEmployees.length;\n    }\n    static {\n      this.ɵfac = function EmployeeListComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || EmployeeListComponent)(i0.ɵɵdirectiveInject(i1.EmployeeService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: EmployeeListComponent,\n        selectors: [[\"app-employee-list\"]],\n        decls: 55,\n        vars: 10,\n        consts: [[1, \"container-fluid\", \"py-4\"], [1, \"row\"], [1, \"col-12\"], [1, \"card\", \"shadow\"], [1, \"card-header\", \"bg-primary\", \"text-white\"], [1, \"mb-0\"], [1, \"card-body\"], [1, \"row\", \"mb-4\"], [1, \"col-md-6\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Enter Department ID (e.g., dept01)\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", 3, \"click\"], [\"role\", \"group\", 1, \"btn-group\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-info\", 3, \"click\"], [\"class\", \"text-center py-4\", 4, \"ngIf\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [1, \"row\", \"mt-4\"], [1, \"col-md-3\"], [1, \"card\", \"bg-info\", \"text-white\"], [1, \"card\", \"bg-success\", \"text-white\"], [1, \"card\", \"bg-warning\", \"text-white\"], [1, \"card\", \"bg-primary\", \"text-white\"], [3, \"employee\", \"departments\", \"isEditMode\", \"close\", \"employeeSaved\", 4, \"ngIf\"], [1, \"text-center\", \"py-4\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"table-responsive\"], [1, \"table\", \"table-striped\", \"table-hover\"], [1, \"table-dark\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [4, \"ngIf\"], [\"role\", \"group\", 1, \"btn-group\", \"btn-group-sm\"], [\"type\", \"button\", \"title\", \"View Details\", 1, \"btn\", \"btn-outline-primary\", 3, \"click\"], [1, \"fas\", \"fa-eye\"], [\"type\", \"button\", \"title\", \"Edit\", 1, \"btn\", \"btn-outline-warning\", 3, \"click\"], [1, \"fas\", \"fa-edit\"], [\"type\", \"button\", \"title\", \"Delete\", 1, \"btn\", \"btn-outline-danger\", 3, \"click\"], [1, \"fas\", \"fa-trash\"], [\"colspan\", \"7\", 1, \"text-center\", \"py-4\"], [3, \"close\", \"employeeSaved\", \"employee\", \"departments\", \"isEditMode\"]],\n        template: function EmployeeListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h2\", 5);\n            i0.ɵɵtext(6, \"Employee Management System\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(7, \"div\", 6)(8, \"div\", 7)(9, \"div\", 8)(10, \"div\", 9)(11, \"input\", 10);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function EmployeeListComponent_Template_input_ngModelChange_11_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.searchDepartmentId, $event) || (ctx.searchDepartmentId = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"button\", 11);\n            i0.ɵɵlistener(\"click\", function EmployeeListComponent_Template_button_click_12_listener() {\n              return ctx.searchByDepartment();\n            });\n            i0.ɵɵtext(13, \" Search by Department \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(14, \"div\", 8)(15, \"div\", 12)(16, \"button\", 13);\n            i0.ɵɵlistener(\"click\", function EmployeeListComponent_Template_button_click_16_listener() {\n              return ctx.showAllEmployees();\n            });\n            i0.ɵɵtext(17, \" Show All Employees \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"button\", 14);\n            i0.ɵɵlistener(\"click\", function EmployeeListComponent_Template_button_click_18_listener() {\n              return ctx.addNewEmployee();\n            });\n            i0.ɵɵtext(19, \" Add New Employee \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"button\", 15);\n            i0.ɵɵlistener(\"click\", function EmployeeListComponent_Template_button_click_20_listener() {\n              return ctx.generateReport();\n            });\n            i0.ɵɵtext(21, \" Generate PDF Report \");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵtemplate(22, EmployeeListComponent_div_22_Template, 4, 0, \"div\", 16)(23, EmployeeListComponent_div_23_Template, 21, 3, \"div\", 17);\n            i0.ɵɵelementStart(24, \"div\", 18)(25, \"div\", 19)(26, \"div\", 20)(27, \"div\", 6)(28, \"h5\");\n            i0.ɵɵtext(29, \"Total Employees\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"h3\");\n            i0.ɵɵtext(31);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(32, \"div\", 19)(33, \"div\", 21)(34, \"div\", 6)(35, \"h5\");\n            i0.ɵɵtext(36, \"Total Departments\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(37, \"h3\");\n            i0.ɵɵtext(38);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(39, \"div\", 19)(40, \"div\", 22)(41, \"div\", 6)(42, \"h5\");\n            i0.ɵɵtext(43, \"Filtered Results\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(44, \"h3\");\n            i0.ɵɵtext(45);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(46, \"div\", 19)(47, \"div\", 23)(48, \"div\", 6)(49, \"h5\");\n            i0.ɵɵtext(50, \"Average Salary\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(51, \"h3\");\n            i0.ɵɵtext(52);\n            i0.ɵɵpipe(53, \"currency\");\n            i0.ɵɵelementEnd()()()()()()()()()();\n            i0.ɵɵtemplate(54, EmployeeListComponent_app_employee_modal_54_Template, 1, 3, \"app-employee-modal\", 24);\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(11);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchDepartmentId);\n            i0.ɵɵadvance(11);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n            i0.ɵɵadvance(8);\n            i0.ɵɵtextInterpolate(ctx.employees.length);\n            i0.ɵɵadvance(7);\n            i0.ɵɵtextInterpolate(ctx.departments.length);\n            i0.ɵɵadvance(7);\n            i0.ɵɵtextInterpolate(ctx.filteredEmployees.length);\n            i0.ɵɵadvance(7);\n            i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(53, 8, ctx.getAverageSalary()));\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.showEmployeeModal);\n          }\n        },\n        dependencies: [CommonModule, i2.NgForOf, i2.NgIf, i2.CurrencyPipe, FormsModule, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, ReactiveFormsModule, EmployeeModalComponent],\n        styles: [\".card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013}.table[_ngcontent-%COMP%]{margin-bottom:0}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{margin-right:2px}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.card-header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.125)}.table-responsive[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto}.input-group[_ngcontent-%COMP%]{margin-bottom:0}@media (max-width: 768px){.btn-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:5px}}\"]\n      });\n    }\n  }\n  return EmployeeListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}